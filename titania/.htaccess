<Files "config.php">
	Order Allow,Deny
	Deny from All
</Files>

<Files "common.php">
	Order Allow,Deny
	Deny from All
</Files>

RewriteEngine on

##
# URL's should end in ([^/]+)?
# The last section is used for additional information in the URL (sid, style, action, etc)
# It is handled internally, so you do not need to pass it to anything.
##

#download
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^download/([^/]+)$									/customise/db/download/file.php [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^view-install/modx/([^/]+)$							/customise/db/download/modx/$1 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^view-install/([^/]+)$								/customise/db/download/view_install.php [NC]

#manage
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^manage?/([^/]+)?/?([^/]+)?$						/customise/db/manage/index.php?page=$1 [NC]

#authors
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^authors?/([^/]+)/?([^/]+)?/?([^/]+)?$				/customise/db/authors/index.php?u=$1&page=$2 [NC]

#display all contribs
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^contributions/all/?([^/]+)?$						/customise/db/index.php?action=contributions [NC]

#display support topics
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^support/(all|mod|style|converter|official_tool|bbcode|bridge|translation|contributions?)/?([^/]+)?$								/customise/db/index.php?action=support&type=$1 [NC]

#contributions
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^contribution/id/([0-9]+)/?$						/customise/db/contributions/index.php?id=$1 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^(mod|style|converter|official_tool|bbcode|bridge|translation|contributions?)/(create)/?([^/]+)?$						/customise/db/contributions/index.php?page=$2&type=$1 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^(mod|style|converter|official_tool|bbcode|bridge|translation|contributions?)/([^/]+)/?([^/]+)?/?([^/]+)?$			/customise/db/contributions/index.php?c=$2&page=$3&type=$1 [NC]

#search/faq/cron
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^(search|faq|cron)/?([^/]+)?$						/customise/db/$1.php [NC]

#find-contribution
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^(find\-contribution)/?([^/]+)?$					/customise/db/search.php?mode=find-contribution [NC]

#rating/login/logout
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^(rate|login|logout)/?([^/]+)?$						/customise/db/index.php?action=$1 [NC]

#misc index stuff
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^index/([^/]+)/([^/]+)?$							/customise/db/index.php?action=$1 [NC]

#ajax
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^ajax/([^/]+)?$										/customise/db/ajax.php [NC]

#categories
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^([^/]+)/([^/]+)/([^/]+)-([0-9]+)/?([^/]+)?$		/customise/db/index.php?c=$4 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^([^/]+)/([^/]+)-([0-9]+)/?([^/]+)?$				/customise/db/index.php?c=$3 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^([^/]+)-([0-9]+)/?([^/]+)?$						/customise/db/index.php?c=$2 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^([^/]+)?$											/customise/db/index.php [NC]

#queue stats
RewriteCond %{REQUEST_FILENAME} !-f
Rewriterule ^queue-stats/(mod|style|converter|official_tool|bbcode|bridge|translation|contributions?)/?([^/]+)?$								./index.php?action=stats&type=$1 [NC]
